{% extends "base.html" %}
{% load static %}

{% block title %}Crear cuenta - GUIZI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/signup1.css' %}">
{% endblock %}

{% block content %}
<div class="register-container">

    <div class="main-panel">
        <div class="header">
            <div class="logo-container">
                <img src="{% static 'img/GUISI-LOGO.png' %}" alt="Guizi Logo">
            </div>
            <h2>Crea tu cuenta</h2>
            <p>¡Completa el formulario!</p>
        </div>

        <form method="post">
            {% csrf_token %}

            <div class="form-row">
                <div class="form-group">
                    {{ form.first_name.label_tag }}
                    {{ form.first_name }}
                    {% for error in form.first_name.errors %}
                        <p class="error">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="form-group">
                    {{ form.last_name.label_tag }}
                    {{ form.last_name }}
                    {% for error in form.last_name.errors %}
                        <p class="error">{{ error }}</p>
                    {% endfor %}
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    {{ form.role.label_tag }}
                    {{ form.role }}
                    {% for error in form.role.errors %}
                        <p class="error">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="form-group">
                    {{ form.age.label_tag }}
                    {{ form.age }}
                    {% for error in form.age.errors %}
                        <p class="error">{{ error }}</p>
                    {% endfor %}
                </div>
            </div>

            <div class="form-group">
                {{ form.email.label_tag }}
                {{ form.email }}
                {% for error in form.email.errors %}
                    <p class="error">{{ error }}</p>
                {% endfor %}
            </div>

            <p class="password-requirements">- Los requisitos de la contraseña</p>

            <div class="form-row">
                <div class="form-group">
                    {{ form.password1.label_tag }}
                    {{ form.password1 }}
                    {% for error in form.password1.errors %}
                        <p class="error">{{ error }}</p>
                    {% endfor %}
                </div>
                <div class="form-group">
                    {{ form.password2.label_tag }}
                    {{ form.password2 }}
                    {% for error in form.password2.errors %}
                        <p class="error">{{ error }}</p>
                    {% endfor %}
                </div>
            </div>

            {% if form.non_field_errors %}
            <div class="error">
                {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}

            <p class="login-info">
                ¿Ya tienes cuenta? <a href="{% url 'guiziapp:login' %}">Haz clic aquí</a>
            </p>

            <button type="submit" class="register-btn">ENTRAR</button>
        </form>

        {% if messages %}
            <div class="messages center-text">
                {% for message in messages %}
                    <p class="{{ message.tags }}">{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
    </div> <!-- cierre de main-panel -->

    <div class="iguana-panel">
        <img src="{% static 'img/Iguana_Registro1.1.png' %}" alt="Iguana">
    </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const select = document.querySelector('select[name="role"]');
    function updateColor() {
        select.style.color = select.value === "" ? '#999' : '#333';
    }
    if(select) {
        updateColor();
        select.addEventListener('change', updateColor);
    }
});
</script>
{% endblock %}
